{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createInterceptor = void 0;\nvar strict_event_emitter_1 = require(\"strict-event-emitter\");\nfunction createInterceptor(options) {\n  var observer = new strict_event_emitter_1.StrictEventEmitter();\n  var cleanupFns = [];\n  return {\n    apply: function () {\n      cleanupFns = options.modules.map(function (interceptor) {\n        return interceptor(observer, options.resolver);\n      });\n    },\n    on: function (event, listener) {\n      observer.addListener(event, listener);\n    },\n    restore: function () {\n      observer.removeAllListeners();\n      if (cleanupFns.length === 0) {\n        throw new Error(\"Failed to restore patched modules: no patches found. Did you forget to run \\\".apply()\\\"?\");\n      }\n      cleanupFns.forEach(function (restore) {\n        return restore();\n      });\n    }\n  };\n}\nexports.createInterceptor = createInterceptor;","map":{"version":3,"names":["strict_event_emitter_1","require","createInterceptor","options","observer","StrictEventEmitter","cleanupFns","apply","modules","map","interceptor","resolver","on","event","listener","addListener","restore","removeAllListeners","length","Error","forEach","exports"],"sources":["../src/createInterceptor.ts"],"sourcesContent":[null],"mappings":";;;;;;AAEA,IAAAA,sBAAA,GAAAC,OAAA;AAgEA,SAAgBC,iBAAiBA,CAACC,OAA2B;EAC3D,IAAMC,QAAQ,GAAG,IAAIJ,sBAAA,CAAAK,kBAAkB,EAAwB;EAC/D,IAAIC,UAAU,GAA2B,EAAE;EAE3C,OAAO;IACLC,KAAK,WAAAA,CAAA;MACHD,UAAU,GAAGH,OAAO,CAACK,OAAO,CAACC,GAAG,CAAC,UAACC,WAAW;QAC3C,OAAOA,WAAW,CAACN,QAAQ,EAAED,OAAO,CAACQ,QAAQ,CAAC;MAChD,CAAC,CAAC;IACJ,CAAC;IACDC,EAAE,WAAAA,CAACC,KAAK,EAAEC,QAAQ;MAChBV,QAAQ,CAACW,WAAW,CAACF,KAAK,EAAEC,QAAQ,CAAC;IACvC,CAAC;IACDE,OAAO,WAAAA,CAAA;MACLZ,QAAQ,CAACa,kBAAkB,EAAE;MAE7B,IAAIX,UAAU,CAACY,MAAM,KAAK,CAAC,EAAE;QAC3B,MAAM,IAAIC,KAAK,CACb,0FAAwF,CACzF;;MAGHb,UAAU,CAACc,OAAO,CAAC,UAACJ,OAAO;QAAK,OAAAA,OAAO,EAAE;MAAT,CAAS,CAAC;IAC5C;GACD;AACH;AAzBAK,OAAA,CAAAnB,iBAAA,GAAAA,iBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}